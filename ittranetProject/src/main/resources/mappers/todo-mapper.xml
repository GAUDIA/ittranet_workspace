<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
 
<mapper namespace="todoMapper">

<resultMap type="Todo" id="todoList">
	<result column="todo_no" property="todoNo" />
	<result column="pr_no" property="prNo" />
	<result column="emp_no" property="empNo" />
	<result column="todo_title" property="todoTitle" />
	<result column="todo_startdate" property="todoStartdate" />
	<result column="todo_enddate" property="todoEnddate" />
	<result column="todo_content" property="todoContent" />
	<result column="status" property="status" />
	<result column="pr_title" property="prTitle"  />
</resultMap>

<select id="selectTodo" resultMap="todoList">
 	select
	    todo_no
	   ,t.pr_no
	   ,t.emp_no
	   ,todo_title
	   ,todo_startdate
	   ,todo_enddate
	   ,todo_content
	   ,t.status
       ,pr_title
	from todo t 
    join project p on p.pr_no = t.pr_no  
	where t.emp_no = #{empNo}
</select>

<select id="countTodo" resultMap="todoList">
 	select
	    todo_no
	   ,t.pr_no
	   ,t.emp_no
	   ,t.status
	from todo t 
    join project p on p.pr_no = t.pr_no  
	where t.emp_no = #{empNo}
	  and t.pr_no = #{prNo}
</select>
</mapper>